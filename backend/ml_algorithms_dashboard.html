<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Algorithms Dashboard - My Little Thingz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s ease;
        }
        
        .nav-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }
        
        .nav-tab:hover {
            background: #e9ecef;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .algorithm-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .algorithm-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #667eea;
            transition: transform 0.3s ease;
        }
        
        .algorithm-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .algorithm-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }
        
        .algorithm-card p {
            color: #6c757d;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
        }
        
        .status-implemented {
            background: #d4edda;
            color: #155724;
        }
        
        .status-enhanced {
            background: #fff3cd;
            color: #856404;
        }
        
        .test-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #dee2e6;
        }
        
        .test-section h4 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #495057;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .form-group textarea {
            height: 100px;
            resize: vertical;
        }
        
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            background: #5a6fd8;
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .results {
            background: #f8f9fa;
            border-radius: 5px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #28a745;
        }
        
        .results h5 {
            color: #28a745;
            margin-bottom: 15px;
        }
        
        .results pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 0.9rem;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border-left-color: #dc3545;
        }
        
        .error h5 {
            color: #721c24;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            border: 1px solid #dee2e6;
        }
        
        .stat-card h4 {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-card p {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        
        .comparison-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }
        
        .comparison-table tr:hover {
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ¤– ML Algorithms Dashboard</h1>
            <p>Test and compare all machine learning algorithms in My Little Thingz</p>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">Overview</button>
            <button class="nav-tab" onclick="showTab('knn')">KNN</button>
            <button class="nav-tab" onclick="showTab('bayesian')">Bayesian</button>
            <button class="nav-tab" onclick="showTab('decision-tree')">Decision Tree</button>
            <button class="nav-tab" onclick="showTab('svm')">SVM</button>
            <button class="nav-tab" onclick="showTab('bpnn')">BPNN</button>
            <button class="nav-tab" onclick="showTab('compare')">Compare</button>
        </div>
        
        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <h2>Machine Learning Algorithms Overview</h2>
            <p style="margin-bottom: 30px; color: #6c757d;">All 5 machine learning algorithms are implemented and ready to use in your gift recommendation system.</p>
            
            <div class="algorithm-grid">
                <div class="algorithm-card">
                    <h3>1. K-Nearest Neighbors (KNN)</h3>
                    <p>Finds similar products and gifts based on user preferences and product features. Uses collaborative filtering to recommend items liked by similar users.</p>
                    <span class="status-badge status-implemented">âœ… Implemented</span>
                </div>
                
                <div class="algorithm-card">
                    <h3>2. Bayesian Classifier (Naive Bayes)</h3>
                    <p>Predicts gift categories from product names using keyword matching and confidence scoring. Automatically categorizes gifts with high accuracy.</p>
                    <span class="status-badge status-implemented">âœ… Implemented</span>
                </div>
                
                <div class="algorithm-card">
                    <h3>3. Decision Tree</h3>
                    <p>Suggests add-ons like greeting cards or ribbons based on gift price and category. Uses if-else rules to make smart recommendations.</p>
                    <span class="status-badge status-implemented">âœ… Implemented</span>
                </div>
                
                <div class="algorithm-card">
                    <h3>4. Support Vector Machine (SVM)</h3>
                    <p>Classifies gifts as Budget vs Premium based on price, category, keywords, and availability. Draws boundaries to separate gift tiers.</p>
                    <span class="status-badge status-implemented">âœ… Implemented</span>
                </div>
                
                <div class="algorithm-card">
                    <h3>5. Backpropagation Neural Network (BPNN)</h3>
                    <p>Predicts what customers will like next based on their past purchases, views, and ratings. Uses deep learning for personalized recommendations.</p>
                    <span class="status-badge status-implemented">âœ… Implemented</span>
                </div>
            </div>
            
            <div class="test-section">
                <h4>Quick Test All Algorithms</h4>
                <p>Test all algorithms with a single product to see how they work together.</p>
                <div class="form-group">
                    <label for="testProductId">Product ID:</label>
                    <input type="number" id="testProductId" placeholder="Enter product ID" value="1">
                </div>
                <div class="form-group">
                    <label for="testUserId">User ID (optional):</label>
                    <input type="number" id="testUserId" placeholder="Enter user ID" value="1">
                </div>
                <button class="btn" onclick="testAllAlgorithms()">Test All Algorithms</button>
                <div id="allAlgorithmsResults" class="results" style="display: none;"></div>
            </div>
        </div>
        
        <!-- KNN Tab -->
        <div id="knn" class="tab-content">
            <h2>K-Nearest Neighbors (KNN) Testing</h2>
            <p>Find similar products and user-based recommendations using KNN algorithm.</p>
            
            <div class="test-section">
                <h4>Product Similarity</h4>
                <div class="form-group">
                    <label for="knnProductId">Product ID:</label>
                    <input type="number" id="knnProductId" placeholder="Enter product ID" value="1">
                </div>
                <div class="form-group">
                    <label for="knnK">K Value (neighbors):</label>
                    <input type="number" id="knnK" placeholder="Number of neighbors" value="5" min="1" max="20">
                </div>
                <div class="form-group">
                    <label for="knnThreshold">Similarity Threshold:</label>
                    <input type="number" id="knnThreshold" placeholder="0.0 to 1.0" value="0.3" min="0" max="1" step="0.1">
                </div>
                <button class="btn" onclick="testKNN()">Find Similar Products</button>
            </div>
            
            <div class="test-section">
                <h4>User-Based Recommendations</h4>
                <div class="form-group">
                    <label for="knnUserId">User ID:</label>
                    <input type="number" id="knnUserId" placeholder="Enter user ID" value="1">
                </div>
                <button class="btn" onclick="testKNNUser()">Get User Recommendations</button>
            </div>
            
            <div id="knnResults" class="results" style="display: none;"></div>
        </div>
        
        <!-- Bayesian Tab -->
        <div id="bayesian" class="tab-content">
            <h2>Bayesian Classifier Testing</h2>
            <p>Test gift category classification using keyword matching and confidence scoring.</p>
            
            <div class="test-section">
                <h4>Single Gift Classification</h4>
                <div class="form-group">
                    <label for="bayesianGiftName">Gift Name:</label>
                    <input type="text" id="bayesianGiftName" placeholder="e.g., Birthday Greeting Card" value="Birthday Greeting Card">
                </div>
                <div class="form-group">
                    <label for="bayesianThreshold">Confidence Threshold:</label>
                    <input type="number" id="bayesianThreshold" placeholder="0.0 to 1.0" value="0.75" min="0" max="1" step="0.05">
                </div>
                <button class="btn" onclick="testBayesian()">Classify Gift</button>
            </div>
            
            <div class="test-section">
                <h4>Batch Classification</h4>
                <div class="form-group">
                    <label for="bayesianBatch">Gift Names (one per line):</label>
                    <textarea id="bayesianBatch" placeholder="Wedding Card&#10;Custom Chocolate Box&#10;Photo Frame&#10;Flower Bouquet">Wedding Card
Custom Chocolate Box
Photo Frame
Flower Bouquet</textarea>
                </div>
                <button class="btn" onclick="testBayesianBatch()">Classify All</button>
            </div>
            
            <div id="bayesianResults" class="results" style="display: none;"></div>
        </div>
        
        <!-- Decision Tree Tab -->
        <div id="decision-tree" class="tab-content">
            <h2>Decision Tree Testing</h2>
            <p>Test add-on recommendations based on gift price and category using decision tree rules.</p>
            
            <div class="test-section">
                <h4>Add-on Recommendation</h4>
                <div class="form-group">
                    <label for="dtGiftId">Gift ID:</label>
                    <input type="number" id="dtGiftId" placeholder="Enter gift ID" value="1">
                </div>
                <button class="btn" onclick="testDecisionTree()">Get Add-on Recommendations</button>
            </div>
            
            <div class="test-section">
                <h4>Custom Gift Test</h4>
                <div class="form-group">
                    <label for="dtPrice">Gift Price:</label>
                    <input type="number" id="dtPrice" placeholder="Enter price" value="1200" step="0.01">
                </div>
                <div class="form-group">
                    <label for="dtCategory">Category:</label>
                    <select id="dtCategory">
                        <option value="gift box">Gift Box</option>
                        <option value="boquetes">Bouquets</option>
                        <option value="frames">Frames</option>
                        <option value="custom chocolate">Custom Chocolate</option>
                        <option value="Wedding card">Wedding Card</option>
                        <option value="Greeting Card">Greeting Card</option>
                    </select>
                </div>
                <button class="btn" onclick="testDecisionTreeCustom()">Test Custom Gift</button>
            </div>
            
            <div id="decisionTreeResults" class="results" style="display: none;"></div>
        </div>
        
        <!-- SVM Tab -->
        <div id="svm" class="tab-content">
            <h2>Support Vector Machine (SVM) Testing</h2>
            <p>Test Budget vs Premium classification using SVM algorithm.</p>
            
            <div class="test-section">
                <h4>Single Gift Classification</h4>
                <div class="form-group">
                    <label for="svmGiftId">Gift ID:</label>
                    <input type="number" id="svmGiftId" placeholder="Enter gift ID" value="1">
                </div>
                <button class="btn" onclick="testSVM()">Classify Gift</button>
            </div>
            
            <div class="test-section">
                <h4>Batch Classification</h4>
                <div class="form-group">
                    <label for="svmLimit">Number of gifts to classify:</label>
                    <input type="number" id="svmLimit" placeholder="Number of gifts" value="10" min="1" max="100">
                </div>
                <button class="btn" onclick="testSVMBatch()">Classify Batch</button>
            </div>
            
            <div class="test-section">
                <h4>Model Training</h4>
                <button class="btn btn-success" onclick="trainSVMModel()">Train SVM Model</button>
                <button class="btn btn-secondary" onclick="getSVMStats()">Get Model Stats</button>
            </div>
            
            <div id="svmResults" class="results" style="display: none;"></div>
        </div>
        
        <!-- BPNN Tab -->
        <div id="bpnn" class="tab-content">
            <h2>Backpropagation Neural Network (BPNN) Testing</h2>
            <p>Test AI-powered recommendations using neural networks.</p>
            
            <div class="test-section">
                <h4>User Recommendations</h4>
                <div class="form-group">
                    <label for="bpnnUserId">User ID:</label>
                    <input type="number" id="bpnnUserId" placeholder="Enter user ID" value="1">
                </div>
                <div class="form-group">
                    <label for="bpnnLimit">Number of recommendations:</label>
                    <input type="number" id="bpnnLimit" placeholder="Number of recommendations" value="8" min="1" max="20">
                </div>
                <div class="form-group">
                    <label for="bpnnConfidence">Minimum confidence:</label>
                    <input type="number" id="bpnnConfidence" placeholder="0.0 to 1.0" value="0.3" min="0" max="1" step="0.1">
                </div>
                <button class="btn" onclick="testBPNN()">Get AI Recommendations</button>
            </div>
            
            <div class="test-section">
                <h4>Model Training</h4>
                <button class="btn btn-success" onclick="trainBPNNModel()">Train BPNN Model</button>
                <button class="btn btn-secondary" onclick="getBPNNStats()">Get Model Stats</button>
            </div>
            
            <div id="bpnnResults" class="results" style="display: none;"></div>
        </div>
        
        <!-- Compare Tab -->
        <div id="compare" class="tab-content">
            <h2>Algorithm Comparison</h2>
            <p>Compare all algorithms side by side with the same input.</p>
            
            <div class="test-section">
                <h4>Compare All Algorithms</h4>
                <div class="form-group">
                    <label for="compareProductId">Product ID:</label>
                    <input type="number" id="compareProductId" placeholder="Enter product ID" value="1">
                </div>
                <div class="form-group">
                    <label for="compareUserId">User ID:</label>
                    <input type="number" id="compareUserId" placeholder="Enter user ID" value="1">
                </div>
                <button class="btn" onclick="compareAllAlgorithms()">Compare All</button>
            </div>
            
            <div id="compareResults" class="results" style="display: none;"></div>
        </div>
    </div>
    
    <script>
        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all nav tabs
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // API call helper
        async function apiCall(url, method = 'GET', data = null) {
            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                };
                
                if (data) {
                    options.body = JSON.stringify(data);
                }
                
                const response = await fetch(url, options);
                const result = await response.json();
                
                if (!response.ok) {
                    throw new Error(result.message || 'API call failed');
                }
                
                return result;
            } catch (error) {
                console.error('API Error:', error);
                throw error;
            }
        }
        
        // Show results
        function showResults(elementId, data, isError = false) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.className = isError ? 'results error' : 'results';
            
            const pre = document.createElement('pre');
            pre.textContent = JSON.stringify(data, null, 2);
            element.innerHTML = '<h5>' + (isError ? 'Error' : 'Results') + '</h5>';
            element.appendChild(pre);
        }
        
        // Test all algorithms
        async function testAllAlgorithms() {
            const productId = document.getElementById('testProductId').value;
            const userId = document.getElementById('testUserId').value;
            
            if (!productId) {
                alert('Please enter a product ID');
                return;
            }
            
            const results = {};
            
            try {
                // Test KNN
                const knnResult = await apiCall(`/my_little_thingz/backend/api/customer/knn_recommendations.php?product_id=${productId}&limit=3`);
                results.KNN = knnResult;
            } catch (error) {
                results.KNN = { error: error.message };
            }
            
            try {
                // Test Bayesian
                const bayesianResult = await apiCall(`/my_little_thingz/backend/api/customer/gift-classifier.php?gift_name=Test%20Gift`);
                results.Bayesian = bayesianResult;
            } catch (error) {
                results.Bayesian = { error: error.message };
            }
            
            try {
                // Test Decision Tree
                const dtResult = await apiCall(`/my_little_thingz/backend/api/customer/decision-tree-addons.php?gift_id=${productId}`);
                results.DecisionTree = dtResult;
            } catch (error) {
                results.DecisionTree = { error: error.message };
            }
            
            try {
                // Test SVM
                const svmResult = await apiCall(`/my_little_thingz/backend/api/customer/svm_classifier.php?gift_id=${productId}`);
                results.SVM = svmResult;
            } catch (error) {
                results.SVM = { error: error.message };
            }
            
            if (userId) {
                try {
                    // Test BPNN
                    const bpnnResult = await apiCall(`/my_little_thingz/backend/api/customer/bpnn_recommendations.php?user_id=${userId}&limit=3`);
                    results.BPNN = bpnnResult;
                } catch (error) {
                    results.BPNN = { error: error.message };
                }
            }
            
            showResults('allAlgorithmsResults', results);
        }
        
        // KNN Tests
        async function testKNN() {
            const productId = document.getElementById('knnProductId').value;
            const k = document.getElementById('knnK').value;
            const threshold = document.getElementById('knnThreshold').value;
            
            if (!productId) {
                alert('Please enter a product ID');
                return;
            }
            
            try {
                const result = await apiCall(`/my_little_thingz/backend/api/customer/knn_recommendations.php?product_id=${productId}&k=${k}&similarity_threshold=${threshold}&type=product`);
                showResults('knnResults', result);
            } catch (error) {
                showResults('knnResults', { error: error.message }, true);
            }
        }
        
        async function testKNNUser() {
            const userId = document.getElementById('knnUserId').value;
            
            if (!userId) {
                alert('Please enter a user ID');
                return;
            }
            
            try {
                const result = await apiCall(`/my_little_thingz/backend/api/customer/knn_recommendations.php?user_id=${userId}&type=user`);
                showResults('knnResults', result);
            } catch (error) {
                showResults('knnResults', { error: error.message }, true);
            }
        }
        
        // Bayesian Tests
        async function testBayesian() {
            const giftName = document.getElementById('bayesianGiftName').value;
            const threshold = document.getElementById('bayesianThreshold').value;
            
            if (!giftName) {
                alert('Please enter a gift name');
                return;
            }
            
            try {
                const result = await apiCall(`/my_little_thingz/backend/api/customer/gift-classifier.php?gift_name=${encodeURIComponent(giftName)}&confidence_threshold=${threshold}`);
                showResults('bayesianResults', result);
            } catch (error) {
                showResults('bayesianResults', { error: error.message }, true);
            }
        }
        
        async function testBayesianBatch() {
            const giftNames = document.getElementById('bayesianBatch').value.split('\n').filter(name => name.trim());
            
            if (giftNames.length === 0) {
                alert('Please enter at least one gift name');
                return;
            }
            
            try {
                const result = await apiCall(`/my_little_thingz/backend/api/customer/gift-classifier.php?gift_names=${encodeURIComponent(JSON.stringify(giftNames))}`);
                showResults('bayesianResults', result);
            } catch (error) {
                showResults('bayesianResults', { error: error.message }, true);
            }
        }
        
        // Decision Tree Tests
        async function testDecisionTree() {
            const giftId = document.getElementById('dtGiftId').value;
            
            if (!giftId) {
                alert('Please enter a gift ID');
                return;
            }
            
            try {
                const result = await apiCall(`/my_little_thingz/backend/api/customer/decision-tree-addons.php?gift_id=${giftId}`);
                showResults('decisionTreeResults', result);
            } catch (error) {
                showResults('decisionTreeResults', { error: error.message }, true);
            }
        }
        
        async function testDecisionTreeCustom() {
            const price = document.getElementById('dtPrice').value;
            const category = document.getElementById('dtCategory').value;
            
            if (!price) {
                alert('Please enter a price');
                return;
            }
            
            try {
                const result = await apiCall(`/my_little_thingz/backend/api/customer/decision-tree-addons.php?price=${price}&category=${encodeURIComponent(category)}`);
                showResults('decisionTreeResults', result);
            } catch (error) {
                showResults('decisionTreeResults', { error: error.message }, true);
            }
        }
        
        // SVM Tests
        async function testSVM() {
            const giftId = document.getElementById('svmGiftId').value;
            
            if (!giftId) {
                alert('Please enter a gift ID');
                return;
            }
            
            try {
                const result = await apiCall(`/my_little_thingz/backend/api/customer/svm_classifier.php?gift_id=${giftId}`);
                showResults('svmResults', result);
            } catch (error) {
                showResults('svmResults', { error: error.message }, true);
            }
        }
        
        async function testSVMBatch() {
            const limit = document.getElementById('svmLimit').value;
            
            try {
                const result = await apiCall(`/my_little_thingz/backend/api/customer/svm_classifier.php?batch=true&limit=${limit}`);
                showResults('svmResults', result);
            } catch (error) {
                showResults('svmResults', { error: error.message }, true);
            }
        }
        
        async function trainSVMModel() {
            try {
                const result = await apiCall('/my_little_thingz/backend/api/customer/svm_classifier.php', 'POST', { action: 'train' });
                showResults('svmResults', result);
            } catch (error) {
                showResults('svmResults', { error: error.message }, true);
            }
        }
        
        async function getSVMStats() {
            try {
                const result = await apiCall('/my_little_thingz/backend/api/customer/svm_classifier.php');
                showResults('svmResults', result);
            } catch (error) {
                showResults('svmResults', { error: error.message }, true);
            }
        }
        
        // BPNN Tests
        async function testBPNN() {
            const userId = document.getElementById('bpnnUserId').value;
            const limit = document.getElementById('bpnnLimit').value;
            const confidence = document.getElementById('bpnnConfidence').value;
            
            if (!userId) {
                alert('Please enter a user ID');
                return;
            }
            
            try {
                const result = await apiCall(`/my_little_thingz/backend/api/customer/bpnn_recommendations.php?user_id=${userId}&limit=${limit}&min_confidence=${confidence}`);
                showResults('bpnnResults', result);
            } catch (error) {
                showResults('bpnnResults', { error: error.message }, true);
            }
        }
        
        async function trainBPNNModel() {
            try {
                const result = await apiCall('/my_little_thingz/backend/api/customer/bpnn_training.php', 'POST', { action: 'train' });
                showResults('bpnnResults', result);
            } catch (error) {
                showResults('bpnnResults', { error: error.message }, true);
            }
        }
        
        async function getBPNNStats() {
            try {
                const result = await apiCall('/my_little_thingz/backend/api/customer/bpnn_training.php');
                showResults('bpnnResults', result);
            } catch (error) {
                showResults('bpnnResults', { error: error.message }, true);
            }
        }
        
        // Compare all algorithms
        async function compareAllAlgorithms() {
            const productId = document.getElementById('compareProductId').value;
            const userId = document.getElementById('compareUserId').value;
            
            if (!productId || !userId) {
                alert('Please enter both product ID and user ID');
                return;
            }
            
            const comparison = {
                input: { product_id: productId, user_id: userId },
                algorithms: {}
            };
            
            try {
                // KNN
                const knnResult = await apiCall(`/my_little_thingz/backend/api/customer/knn_recommendations.php?product_id=${productId}&user_id=${userId}&limit=3`);
                comparison.algorithms.KNN = {
                    status: 'success',
                    recommendations: knnResult.recommendations?.length || 0,
                    algorithm: knnResult.algorithm
                };
            } catch (error) {
                comparison.algorithms.KNN = { status: 'error', error: error.message };
            }
            
            try {
                // SVM
                const svmResult = await apiCall(`/my_little_thingz/backend/api/customer/svm_classifier.php?gift_id=${productId}`);
                comparison.algorithms.SVM = {
                    status: 'success',
                    classification: svmResult.classification?.prediction,
                    confidence: svmResult.classification?.confidence
                };
            } catch (error) {
                comparison.algorithms.SVM = { status: 'error', error: error.message };
            }
            
            try {
                // BPNN
                const bpnnResult = await apiCall(`/my_little_thingz/backend/api/customer/bpnn_recommendations.php?user_id=${userId}&limit=3`);
                comparison.algorithms.BPNN = {
                    status: 'success',
                    recommendations: bpnnResult.recommendations?.length || 0,
                    algorithm: bpnnResult.algorithm
                };
            } catch (error) {
                comparison.algorithms.BPNN = { status: 'error', error: error.message };
            }
            
            showResults('compareResults', comparison);
        }
    </script>
</body>
</html>

















